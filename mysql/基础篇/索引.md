## 1.索引的概述
### 1.1介绍
索引（index）是帮助MySQL高效获取数据的数据结构(有序)。在数据之外，数据库系统还维护着满足 特定查找算法的数据结构，这些数据结构以某种方式引用（指向）数据， 这样就可以在这些数据结构 上实现高级查找算法，这种数据结构就是索引。
### 1.2特点
优势： 
+ 提高数据检索的效率，降低数据库 的IO成本
+ 通过索引列对数据进行排序，降低数据排序的成本，降低CPU的消耗
劣势：
+ 索引列也是要占用空间的。
+ 素银大大提高了查询的效率，但同时也降低更新表的速度，如对表进行INSERT、UPDATER、DELETE时、效率会大大降低。
## 2.索引结构
### 2.1概述
MySQL的索引是在存储引擎层实现的，不同的存储引擎有不同的索引结构
![[图片存储/Pasted image 20230613202500.png]]
上述是MySQL中所支持的所有索引结构，以下为不同的存储引擎对于索引结构的支持情况
![[图片存储/Pasted image 20230613202551.png]]
在不说明的情况下，都是指B+tree 的结构组织的索引

### 2.2二叉树
![[图片存储/Pasted image 20230613202708.png]]
如果主键是顺序插入的，则会形成一个单链表
![[图片存储/Pasted image 20230613202746.png]]

#### 缺点
+ 顺序插入时，会形成一个链表，查询的性能大大降低
+ 大量数据的情况下，层级较深，检索速度慢

#### 红黑二叉树
红黑树是自平衡的二叉树，那这样即使是顺序插入数据，最终形成的数据结构也是一颗平衡的二叉树
![[图片存储/Pasted image 20230613203012.png]]
红黑二叉树也有一个缺点：在数据量大时，层级较深，检索速度慢

### 2.3B-Tree
B树是一种多叉路衡查找树、相比于二叉树，B树的每个节点可以有多个分支，即多叉。以一颗最大度数（max-degree）为5（5阶）的B-Tree为例，那这个B树每个节点最多存储4个key，5个指针
![[图片存储/Pasted image 20230613203334.png]]
`度数：每个节点的子节点的数量`

[B-Tree Visualization B树可视化生成)](https://www.cs.usfca.edu/~galles/visualization/BTree.html)
特点：
+ 5阶的B树，每一个节点最多存储4个key，对应5个指针。
+ 一点节点存储的key数量达到5，就会裂变，中间元素向上分裂。
+ 在B树种，非叶子节点和叶子节点都会存放数据


### 2.4B+Tree
B+Tree是B-Tree的变种，我们以一颗最大度数（max-degree）为4（4阶）的b+tree为例
![[图片存储/Pasted image 20230613203653.png]]
+ 绿色框框起来的部分，是索引部分，仅仅起到索引数据的作用，不存储数据。
+ 红色框框起来的部分，是数据存储部分，在其叶子节点中要存储具体的数据。
[B+ Tree Visualization B+树的可视化生成)](https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html)

测试插入一组数据： 100 65 169 368 900 556 780 35 215 1200 234 888 158 90 1000 88 120 268 250 

#### B+Tree与B-Tree的主要区别
+ 所有的数据都会出现在叶子节点。
+ 叶子节点形成一个单向链表。 
+ 非叶子节点仅仅起到索引数据作用，具体的数据都是在叶子节点存放的。

#### MySQL优化后的 B+Tree
MySQL索引数据结构对经典的B+Tree进行了优化。在原B+Tree的基础上，增加一个指向相邻叶子节点的链表`指针`，就形成了带有顺序指针的B+Tree，提高区间访问的性能，利于排序。
